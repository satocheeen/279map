enum ParentOfContent {
    Item
    Content
}
input ParentInput {
    type: ParentOfContent!
    id: DataId!
}
input ContentsDatasourceInput {
    datasourceId: String!
    name: String!   # 名前はユーザ側で指定可能
}

# --------------
# connect
# --------------
type ConnectInfo {
    sid: String!
    authLv: Auth!
    userId: String
    userName: String
}
type ConnectResult {
    mapDefine: MapDefine!
    connect: ConnectInfo!
}

# --------------
# swutchMapKind
# --------------
type MapInfo {
    extent: [Float!]!
    itemDataSources: [ItemDatasourceInfo!]!
    contentDataSources: [ContentDatasourceInfo!]!
}
type ItemDatasourceInfo {
    datasourceId: String!
    name: String!
    groupName: String
    initialVisible: Boolean!
    config: ItemDatasourceConfig!
}
type ContentDatasourceInfo {
    datasourceId: String!
    name: String!
    config: ContentDatasourceConfig!
}

# ------------------------------
input UpdateItemInput {
    id: DataId!
    geometry: Geometry
    geoProperties: GeoProperties
}

type UpdateItemsResult {
    success: [DataId!]!
    error: [DataId!]
}
type RegistDataItemInput {
    geometry: Geometry!
    geoProperties: GeoProperties!
}
type Mutation {
    connect (
        mapId: String!
    ): ConnectResult!

    disconnect: Boolean

    switchMapKind (
        mapKind: MapKind!
    ): MapInfo!

    """
    データ登録
    """
    registData (
        datasourceId: String!
        item: RegistDataItemInput
        contents: ContentValueMap!
    ): DataId!

    registItem (
        datasourceId: String!
        geometry: Geometry!
        geoProperties: GeoProperties!
    ): DataId
    
    updateItems (
        targets: [UpdateItemInput!]!
    ): UpdateItemsResult!

    removeItem (
        id: DataId!
    ): Boolean

    registContent (
        parent: ParentInput!
        datasourceId: String!
        values: ContentValueMap!
    ): Boolean

    updateContent (
        id: DataId!
        values: ContentValueMap!
    ): Boolean

    linkContent (
        id: DataId!
        parent: ParentInput!
    ): Boolean

    unlinkContent (
        id: DataId!
        parent: ParentInput!
    ): Boolean

    removeContent (
        id: DataId!
    ): Boolean

    changeAuthLevel (
        userId: ID!
        authLv: Auth!
    ): Boolean

    request (
        mapId: String!
        name: String!
    ): Boolean

}
