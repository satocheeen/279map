type Target {
    "対象アイテムのID"
    id: DataId!
    "アイテムの地図範囲。update時は更新後範囲"
    wkt: String!
}
enum ErrorType {
    "アイテム登録に失敗した場合"
    RegistItemFailed
}

enum Operation {
    Update
    Delete
}
type ErrorInfo {
    "エラー種別"
    type: ErrorType!
    "エラー詳細"
    description: String
    "特定のアイテムに紐づくエラーの場合、アイテムID"
    itemId: DataId
}
type Subscription {
    """
    地図上にアイテムが追加された場合に通知する
    """
    itemInsert (
        "対象の地図ID"
        mapId: String!
        "対象の地図種別"
        mapKind: MapKind!
    ): [Target!]!

    """
    地図上のアイテムが更新された場合に通知する
    """
    itemUpdate (
        "対象の地図ID"
        mapId: String!
        "対象の地図種別"
        mapKind: MapKind!
    ): [Target!]!

    """
    地図上のアイテムが削除された場合に通知する
    """
    itemDelete (
        "対象の地図ID"
        mapId: String!
        "対象の地図種別"
        mapKind: MapKind!
    ): [DataId!]!

    """
    指定のコンテンツが更新/削除された場合に通知する
    """
    contentUpdate (
        "対象のコンテンツID"
        contentId: DataId!
    ): Operation!

    """
    ユーザ権限に更新があった場合
    """
    updateUserAuth (
        "対象ユーザ"
        userId: ID!
        "対象の地図ID"
        mapId: String!
    ): Boolean

    """
    ユーザ一覧情報が更新された場合
    """
    userListUpdate (
        "対象の地図ID"
        mapId: String!
    ): Boolean

    """
    地図定義に変更があった場合
    """
    mapInfoUpdate (
        "対象の地図ID"
        mapId: String!
    ): Boolean

    """
    ユーザが操作している地図でエラーが発生した場合にエラー内容を通知する。
    突き放し実行している登録、更新処理でエラー発生した場合に通知するために用意。
    """
    error (
        "対象セッションID"
        sid: String!
    ): ErrorInfo!
}
